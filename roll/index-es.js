import e,{Component as t}from"react";import{combineReducers as r,createStore as n,applyMiddleware as a}from"redux";import o from"immutability-helper";import{connect as s,Provider as l}from"react-redux";import{Row as c,Col as i,Dropdown as u,InputGroup as d,Button as p,Form as h,Table as m,Modal as f,Card as b}from"react-bootstrap";import{ContextMenuTrigger as y,ContextMenu as E,MenuItem as _}from"react-contextmenu";import v from"redux-thunk";const g={SET_COL_MODELS:"SET_COL_MODELS",RESIZE_COLUMN:"RESIZE_COLUMN",SET_COLUMN_TO_RESIZE:"SET_COLUMN_TO_RESIZE",SET_INITIAL_TABLE_OFFSET_WIDTH:"SET_INITIAL_TABLE_OFFSET_WIDTH",CHANGE_ORDER_DIRECTION:"CHANGE_ORDER_DIRECTION",SELECT_ROW:"SELECT_ROW",SET_DATA:"SET_DATA",SET_TABLE_TITLE:"SET_TABLE_TITLE"},O=()=>({colModels:[],data:[],width:0,sortColumn:null,selectedRow:null,startOffset:0,columnToResize:null,show:!1,RCMID:Date.now(),modalState:null,tableWidth:0,emptyModalState:null}),M=()=>({colModels:[],data:[],width:0,sortColumn:null,selectedRow:null,startOffset:null,columnToResize:null,show:null,RCMID:Date.now(),modalState:null,emptyModalState:null,tableWidth:0,tableTitleProp:"Table title"}),j="REACT_CRUD_MASTER",C="COL_MENU_MODAL",T="CRUD_MODAL",w="CONTEXT_MENU_MODAL";const R={CLOSE_MODAL:"CLOSE_MODAL",OPEN_MODAL:"OPEN_MODAL",GENERATE_COL_NAME_PROPERTIES_IN_ROW_DATA:"GENERATE_COL_NAME_PROPERTIES_IN_ROW_DATA",ON_ROW_DATA_CHANGE:"ON_ROW_DATA_CHANGE"},A=()=>({}),D=()=>({show:!1,colModels:[],rowData:{},emptyRowData:{}});class I{constructor(e){if(this._minWidth=0,this._width=0,this.name="",this.label="",this.orderDirection="",this.showColMenuModal=!1,this.calculateMinWithOfColumnByLabel=e=>{var t=e.split(" ").reduce((e,t)=>{return this.getWidthOfWord(e)>this.getWidthOfWord(t)?e:t});return this.getWidthOfWord(t)+40},this.getWidthOfWord=e=>{let t=document.getElementById("label-width-tester");return t.textContent=e,t.offsetWidth},!I.created){let e=document.createElement("span");e.id="label-width-tester",e.style.fontSize="16px",e.style.fontWeight="700",e.style.position="absolute",e.style.top="-999999px",document.body.appendChild(e),I.created=!0}null!=e&&(Object.assign(this,e),null==e.minWidth&&(this.minWidth=this.calculateMinWithOfColumnByLabel(this.label)),null==e.width&&(this.width=this.getWidthOfWord(this.label)))}get minWidth(){return this._minWidth}set minWidth(e){e<0&&(e=this.calculateMinWithOfColumnByLabel(this.label)),this._minWidth=e}get width(){return this._width}set width(e){e<=0&&(e=this.getWidthOfWord(this.label)),this._width=e}}I.created=!1;const N={OPEN_MODAL:"OPEN_MODAL",CLOSE_MODAL:"CLOSE_MODAL"},S=()=>({}),L=()=>({colModel:new I,show:!1});const z={SET_CONTEXT_MENU_TRIGGER_REF:"SET_CONTEXT_MENU_TRIGGER_REF"},x=()=>({contextMenuTrigger:null,RCMID:Date.now()});const W=r({reactCrudMaster:function(e=M(),t){if(t.namespace!=j)return e;switch(t.type){case g.SET_COL_MODELS:return t=t,Object.assign({},Object.assign({},e),{colModels:t.payload.colModels,tableWidth:t.payload.tableWidth});case g.SET_DATA:{let r=t;return Object.assign({},Object.assign({},e),{data:r.payload.data})}case g.RESIZE_COLUMN:let r=(t=t).payload.e.pageX,n=e.colModels.map(t=>(t.name==e.columnToResize.name&&e.startOffset+r>=e.columnToResize.minWidth&&(t.width=e.startOffset+r),t)),a=0;return n.forEach(e=>{a+=e.width}),o(e,{colModels:{$set:n},tableWidth:{$set:a}});case g.SET_COLUMN_TO_RESIZE:{let r=t,{column:n,e:a}=Object.assign({},r.payload);return null!=n?Object.assign({},Object.assign({},e),{columnToResize:n,startOffset:a.target.parentNode.offsetWidth-a.pageX}):Object.assign({},Object.assign({},e),{columnToResize:null})}case g.SET_INITIAL_TABLE_OFFSET_WIDTH:{let t=document.getElementById(`CMID-${e.RCMID}`);return Object.assign({},Object.assign({},e),{width:t.offsetWidth})}case g.SELECT_ROW:{let r=t;return Object.assign({},Object.assign({},e),{selectedRow:r.payload.row})}case g.CHANGE_ORDER_DIRECTION:{let r=t,n=e.colModels.map(e=>(e.name==r.payload.column.name?"asc"===e.orderDirection?e.orderDirection="desc":"desc"===e.orderDirection?e.orderDirection="":e.orderDirection="asc":e.orderDirection="",e));return Object.assign({},Object.assign({},e),{colModels:n})}case g.SET_TABLE_TITLE:{let r=t;return Object.assign({},Object.assign({},e),{tableTitleProp:r.payload.tableTitle})}default:return e}},crudModal:function(e=D(),t){if(t.namespace!=T)return e;switch(t.type){case R.CLOSE_MODAL:return Object.assign({},Object.assign({},e),{show:!1,rowData:e.emptyRowData});case R.OPEN_MODAL:return Object.assign({},Object.assign({},e),{show:!0});case R.GENERATE_COL_NAME_PROPERTIES_IN_ROW_DATA:{let r={};return t.payload.colModels.map(e=>{r[e.name]=""}),Object.assign({},Object.assign({},e),{rowData:r,emptyRowData:r})}case R.ON_ROW_DATA_CHANGE:{let r=t;return o(e,{rowData:{[r.payload.name]:{$set:r.payload.value}}})}default:return e}},colMenuModal:function(e=L(),t){if(t.namespace!=C)return e;switch(t.type){case N.OPEN_MODAL:{let r=t;return Object.assign({},Object.assign({},e),{show:!0,colModel:r.payload.colModel})}case N.CLOSE_MODAL:return Object.assign({},Object.assign({},e),{show:!1,colModel:null});default:return e}},contextMenuModal:function(e=x(),t){if(t.namespace!=w)return e;switch(t.type){case z.SET_CONTEXT_MENU_TRIGGER_REF:{let r=t;return Object.assign({},Object.assign({},e),{contextMenuTrigger:r.payload.ref})}default:return e}}}),P=T;var B=s((e,t)=>({}),(e,t)=>({openCrudModal:()=>e({type:R.OPEN_MODAL,payload:null,namespace:P})}))(class extends t{constructor(t){super(t),this.render=()=>{let t={borderRadius:0,margin:1};return this.props.tableWidth<620?e.createElement(c,null,e.createElement(i,{xs:2},e.createElement(u,{style:{textAlign:"left"}},e.createElement(u.Toggle,{size:"sm",style:Object.assign({},t),variant:"primary",id:"dropdown-basic"},e.createElement("i",{className:"fas fa-bars"})),e.createElement(u.Menu,null,e.createElement(u.Item,{href:"#/action-1",onClick:()=>this.props.openCrudModal()},e.createElement("i",{className:"fas fa-plus"}),e.createElement("span",{style:{paddingLeft:10}},"Add")),e.createElement(u.Item,{href:"#/action-2"},e.createElement("i",{className:"fas fa-edit"}),e.createElement("span",{style:{paddingLeft:10}},"Edit")),e.createElement(u.Item,{href:"#/action-2"},e.createElement("i",{className:"fas fa-trash-alt"}),e.createElement("span",{style:{paddingLeft:10}},"Delete")),e.createElement(u.Item,{href:"#/action-2"},e.createElement("i",{className:"fas fa-eye"})," ",e.createElement("span",{style:{paddingLeft:10}},"View")),e.createElement(u.Item,{href:"#/action-2"},e.createElement("i",{className:"fas fa-search"})," ",e.createElement("span",{style:{paddingLeft:10}},"Search"))))),e.createElement(i,{xs:6},e.createElement(d,{className:"",style:{textAlign:"center",alignItems:"center",justifyContent:"center"}},e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-angle-left"})),e.createElement("div",{style:{display:"inline-block"}},e.createElement(h.Control,{className:"border-radius-0",style:{height:31,margin:1,padding:2,width:50},defaultValue:"asd"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-angle-right"})))),e.createElement(i,{xs:4}," 102 - 103 / 123 ")):e.createElement(c,null,e.createElement(i,{xs:4,style:{textAlign:"left"}},e.createElement(p,{size:"sm",style:Object.assign({},t),onClick:()=>this.props.openCrudModal()},e.createElement("i",{className:"fas fa-plus"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"far fa-edit"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-trash-alt"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-eye"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-search"}))),e.createElement(i,{xs:4},e.createElement(d,{className:"",style:{textAlign:"center",alignItems:"center",justifyContent:"center"}},e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-angle-double-left"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-angle-left"})),e.createElement("div",{style:{display:"inline-block"}},e.createElement(h.Control,{className:"border-radius-0",style:{height:31,margin:1,padding:2,width:50},defaultValue:"asd"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-angle-right"})),e.createElement(p,{size:"sm",style:Object.assign({},t)},e.createElement("i",{className:"fas fa-angle-double-right"})))),e.createElement(i,{xs:4,style:{textAlign:"right"}},e.createElement(p,null,"<"," "),e.createElement(p,null," ",">"," ")))},this.state={}}});var k=function(){this.__data__=[],this.size=0};var U=function(e,t){return e===t||e!=e&&t!=t};var F=function(e,t){for(var r=e.length;r--;)if(U(e[r][0],t))return r;return-1},G=Array.prototype.splice;var $=function(e){var t=this.__data__,r=F(t,e);return!(r<0||(r==t.length-1?t.pop():G.call(t,r,1),--this.size,0))};var H=function(e){var t=this.__data__,r=F(t,e);return r<0?void 0:t[r][1]};var V=function(e){return F(this.__data__,e)>-1};var X=function(e,t){var r=this.__data__,n=F(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Z.prototype.clear=k,Z.prototype.delete=$,Z.prototype.get=H,Z.prototype.has=V,Z.prototype.set=X;var q=Z;var Y=function(){this.__data__=new q,this.size=0};var J=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var K=function(e){return this.__data__.get(e)};var Q=function(e){return this.__data__.has(e)},ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function te(e,t){return e(t={exports:{}},t.exports),t.exports}var re="object"==typeof ee&&ee&&ee.Object===Object&&ee,ne="object"==typeof self&&self&&self.Object===Object&&self,ae=re||ne||Function("return this")(),oe=ae.Symbol,se=Object.prototype,le=se.hasOwnProperty,ce=se.toString,ie=oe?oe.toStringTag:void 0;var ue=function(e){var t=le.call(e,ie),r=e[ie];try{e[ie]=void 0;var n=!0}catch(e){}var a=ce.call(e);return n&&(t?e[ie]=r:delete e[ie]),a},de=Object.prototype.toString;var pe=function(e){return de.call(e)},he="[object Null]",me="[object Undefined]",fe=oe?oe.toStringTag:void 0;var be=function(e){return null==e?void 0===e?me:he:fe&&fe in Object(e)?ue(e):pe(e)};var ye=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Ee="[object AsyncFunction]",_e="[object Function]",ve="[object GeneratorFunction]",ge="[object Proxy]";var Oe,Me=function(e){if(!ye(e))return!1;var t=be(e);return t==_e||t==ve||t==Ee||t==ge},je=ae["__core-js_shared__"],Ce=(Oe=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+Oe:"";var Te=function(e){return!!Ce&&Ce in e},we=Function.prototype.toString;var Re=function(e){if(null!=e){try{return we.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ae=/^\[object .+?Constructor\]$/,De=Function.prototype,Ie=Object.prototype,Ne=De.toString,Se=Ie.hasOwnProperty,Le=RegExp("^"+Ne.call(Se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ze=function(e){return!(!ye(e)||Te(e))&&(Me(e)?Le:Ae).test(Re(e))};var xe=function(e,t){return null==e?void 0:e[t]};var We=function(e,t){var r=xe(e,t);return ze(r)?r:void 0},Pe=We(ae,"Map"),Be=We(Object,"create");var ke=function(){this.__data__=Be?Be(null):{},this.size=0};var Ue=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Fe="__lodash_hash_undefined__",Ge=Object.prototype.hasOwnProperty;var $e=function(e){var t=this.__data__;if(Be){var r=t[e];return r===Fe?void 0:r}return Ge.call(t,e)?t[e]:void 0},He=Object.prototype.hasOwnProperty;var Ve=function(e){var t=this.__data__;return Be?void 0!==t[e]:He.call(t,e)},Xe="__lodash_hash_undefined__";var Ze=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Be&&void 0===t?Xe:t,this};function qe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qe.prototype.clear=ke,qe.prototype.delete=Ue,qe.prototype.get=$e,qe.prototype.has=Ve,qe.prototype.set=Ze;var Ye=qe;var Je=function(){this.size=0,this.__data__={hash:new Ye,map:new(Pe||q),string:new Ye}};var Ke=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Qe=function(e,t){var r=e.__data__;return Ke(t)?r["string"==typeof t?"string":"hash"]:r.map};var et=function(e){var t=Qe(this,e).delete(e);return this.size-=t?1:0,t};var tt=function(e){return Qe(this,e).get(e)};var rt=function(e){return Qe(this,e).has(e)};var nt=function(e,t){var r=Qe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function at(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}at.prototype.clear=Je,at.prototype.delete=et,at.prototype.get=tt,at.prototype.has=rt,at.prototype.set=nt;var ot=at,st=200;var lt=function(e,t){var r=this.__data__;if(r instanceof q){var n=r.__data__;if(!Pe||n.length<st-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ot(n)}return r.set(e,t),this.size=r.size,this};function ct(e){var t=this.__data__=new q(e);this.size=t.size}ct.prototype.clear=Y,ct.prototype.delete=J,ct.prototype.get=K,ct.prototype.has=Q,ct.prototype.set=lt;var it=ct;var ut=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},dt=function(){try{var e=We(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var pt=function(e,t,r){"__proto__"==t&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},ht=Object.prototype.hasOwnProperty;var mt=function(e,t,r){var n=e[t];ht.call(e,t)&&U(n,r)&&(void 0!==r||t in e)||pt(e,t,r)};var ft=function(e,t,r,n){var a=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=n?n(r[l],e[l],l,r,e):void 0;void 0===c&&(c=e[l]),a?pt(r,l,c):mt(r,l,c)}return r};var bt=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var yt=function(e){return null!=e&&"object"==typeof e},Et="[object Arguments]";var _t=function(e){return yt(e)&&be(e)==Et},vt=Object.prototype,gt=vt.hasOwnProperty,Ot=vt.propertyIsEnumerable,Mt=_t(function(){return arguments}())?_t:function(e){return yt(e)&&gt.call(e,"callee")&&!Ot.call(e,"callee")},jt=Array.isArray;var Ct=function(){return!1},Tt=te(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r?ae.Buffer:void 0,o=(a?a.isBuffer:void 0)||Ct;e.exports=o}),wt=9007199254740991,Rt=/^(?:0|[1-9]\d*)$/;var At=function(e,t){var r=typeof e;return!!(t=null==t?wt:t)&&("number"==r||"symbol"!=r&&Rt.test(e))&&e>-1&&e%1==0&&e<t},Dt=9007199254740991;var It=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Dt},Nt={};Nt["[object Float32Array]"]=Nt["[object Float64Array]"]=Nt["[object Int8Array]"]=Nt["[object Int16Array]"]=Nt["[object Int32Array]"]=Nt["[object Uint8Array]"]=Nt["[object Uint8ClampedArray]"]=Nt["[object Uint16Array]"]=Nt["[object Uint32Array]"]=!0,Nt["[object Arguments]"]=Nt["[object Array]"]=Nt["[object ArrayBuffer]"]=Nt["[object Boolean]"]=Nt["[object DataView]"]=Nt["[object Date]"]=Nt["[object Error]"]=Nt["[object Function]"]=Nt["[object Map]"]=Nt["[object Number]"]=Nt["[object Object]"]=Nt["[object RegExp]"]=Nt["[object Set]"]=Nt["[object String]"]=Nt["[object WeakMap]"]=!1;var St=function(e){return yt(e)&&It(e.length)&&!!Nt[be(e)]};var Lt=function(e){return function(t){return e(t)}},zt=te(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r&&re.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o}),xt=zt&&zt.isTypedArray,Wt=xt?Lt(xt):St,Pt=Object.prototype.hasOwnProperty;var Bt=function(e,t){var r=jt(e),n=!r&&Mt(e),a=!r&&!n&&Tt(e),o=!r&&!n&&!a&&Wt(e),s=r||n||a||o,l=s?bt(e.length,String):[],c=l.length;for(var i in e)!t&&!Pt.call(e,i)||s&&("length"==i||a&&("offset"==i||"parent"==i)||o&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||At(i,c))||l.push(i);return l},kt=Object.prototype;var Ut=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||kt)};var Ft=function(e,t){return function(r){return e(t(r))}},Gt=Ft(Object.keys,Object),$t=Object.prototype.hasOwnProperty;var Ht=function(e){if(!Ut(e))return Gt(e);var t=[];for(var r in Object(e))$t.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Vt=function(e){return null!=e&&It(e.length)&&!Me(e)};var Xt=function(e){return Vt(e)?Bt(e):Ht(e)};var Zt=function(e,t){return e&&ft(t,Xt(t),e)};var qt=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Yt=Object.prototype.hasOwnProperty;var Jt=function(e){if(!ye(e))return qt(e);var t=Ut(e),r=[];for(var n in e)("constructor"!=n||!t&&Yt.call(e,n))&&r.push(n);return r};var Kt=function(e){return Vt(e)?Bt(e,!0):Jt(e)};var Qt=function(e,t){return e&&ft(t,Kt(t),e)},er=te(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,a=n&&n.exports===r?ae.Buffer:void 0,o=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}});var tr=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var rr=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[a++]=s)}return o};var nr=function(){return[]},ar=Object.prototype.propertyIsEnumerable,or=Object.getOwnPropertySymbols,sr=or?function(e){return null==e?[]:(e=Object(e),rr(or(e),function(t){return ar.call(e,t)}))}:nr;var lr=function(e,t){return ft(e,sr(e),t)};var cr=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},ir=Ft(Object.getPrototypeOf,Object),ur=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)cr(t,sr(e)),e=ir(e);return t}:nr;var dr=function(e,t){return ft(e,ur(e),t)};var pr=function(e,t,r){var n=t(e);return jt(e)?n:cr(n,r(e))};var hr=function(e){return pr(e,Xt,sr)};var mr=function(e){return pr(e,Kt,ur)},fr=We(ae,"DataView"),br=We(ae,"Promise"),yr=We(ae,"Set"),Er=We(ae,"WeakMap"),_r=Re(fr),vr=Re(Pe),gr=Re(br),Or=Re(yr),Mr=Re(Er),jr=be;(fr&&"[object DataView]"!=jr(new fr(new ArrayBuffer(1)))||Pe&&"[object Map]"!=jr(new Pe)||br&&"[object Promise]"!=jr(br.resolve())||yr&&"[object Set]"!=jr(new yr)||Er&&"[object WeakMap]"!=jr(new Er))&&(jr=function(e){var t=be(e),r="[object Object]"==t?e.constructor:void 0,n=r?Re(r):"";if(n)switch(n){case _r:return"[object DataView]";case vr:return"[object Map]";case gr:return"[object Promise]";case Or:return"[object Set]";case Mr:return"[object WeakMap]"}return t});var Cr=jr,Tr=Object.prototype.hasOwnProperty;var wr=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Tr.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Rr=ae.Uint8Array;var Ar=function(e){var t=new e.constructor(e.byteLength);return new Rr(t).set(new Rr(e)),t};var Dr=function(e,t){var r=t?Ar(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Ir=/\w*$/;var Nr=function(e){var t=new e.constructor(e.source,Ir.exec(e));return t.lastIndex=e.lastIndex,t},Sr=oe?oe.prototype:void 0,Lr=Sr?Sr.valueOf:void 0;var zr=function(e){return Lr?Object(Lr.call(e)):{}};var xr=function(e,t){var r=t?Ar(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Wr="[object Boolean]",Pr="[object Date]",Br="[object Map]",kr="[object Number]",Ur="[object RegExp]",Fr="[object Set]",Gr="[object String]",$r="[object Symbol]",Hr="[object ArrayBuffer]",Vr="[object DataView]",Xr="[object Float32Array]",Zr="[object Float64Array]",qr="[object Int8Array]",Yr="[object Int16Array]",Jr="[object Int32Array]",Kr="[object Uint8Array]",Qr="[object Uint8ClampedArray]",en="[object Uint16Array]",tn="[object Uint32Array]";var rn=function(e,t,r){var n=e.constructor;switch(t){case Hr:return Ar(e);case Wr:case Pr:return new n(+e);case Vr:return Dr(e,r);case Xr:case Zr:case qr:case Yr:case Jr:case Kr:case Qr:case en:case tn:return xr(e,r);case Br:return new n;case kr:case Gr:return new n(e);case Ur:return Nr(e);case Fr:return new n;case $r:return zr(e)}},nn=Object.create,an=function(){function e(){}return function(t){if(!ye(t))return{};if(nn)return nn(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var on=function(e){return"function"!=typeof e.constructor||Ut(e)?{}:an(ir(e))},sn="[object Map]";var ln=function(e){return yt(e)&&Cr(e)==sn},cn=zt&&zt.isMap,un=cn?Lt(cn):ln,dn="[object Set]";var pn=function(e){return yt(e)&&Cr(e)==dn},hn=zt&&zt.isSet,mn=hn?Lt(hn):pn,fn=1,bn=2,yn=4,En="[object Arguments]",_n="[object Function]",vn="[object GeneratorFunction]",gn="[object Object]",On={};On[En]=On["[object Array]"]=On["[object ArrayBuffer]"]=On["[object DataView]"]=On["[object Boolean]"]=On["[object Date]"]=On["[object Float32Array]"]=On["[object Float64Array]"]=On["[object Int8Array]"]=On["[object Int16Array]"]=On["[object Int32Array]"]=On["[object Map]"]=On["[object Number]"]=On[gn]=On["[object RegExp]"]=On["[object Set]"]=On["[object String]"]=On["[object Symbol]"]=On["[object Uint8Array]"]=On["[object Uint8ClampedArray]"]=On["[object Uint16Array]"]=On["[object Uint32Array]"]=!0,On["[object Error]"]=On[_n]=On["[object WeakMap]"]=!1;var Mn=function e(t,r,n,a,o,s){var l,c=r&fn,i=r&bn,u=r&yn;if(n&&(l=o?n(t,a,o,s):n(t)),void 0!==l)return l;if(!ye(t))return t;var d=jt(t);if(d){if(l=wr(t),!c)return tr(t,l)}else{var p=Cr(t),h=p==_n||p==vn;if(Tt(t))return er(t,c);if(p==gn||p==En||h&&!o){if(l=i||h?{}:on(t),!c)return i?dr(t,Qt(l,t)):lr(t,Zt(l,t))}else{if(!On[p])return o?t:{};l=rn(t,p,c)}}s||(s=new it);var m=s.get(t);if(m)return m;s.set(t,l),mn(t)?t.forEach(function(a){l.add(e(a,r,n,a,t,s))}):un(t)&&t.forEach(function(a,o){l.set(o,e(a,r,n,o,t,s))});var f=u?i?mr:hr:i?keysIn:Xt,b=d?void 0:f(t);return ut(b||t,function(a,o){b&&(a=t[o=a]),mt(l,o,e(a,r,n,o,t,s))}),l},jn=1,Cn=4;var Tn=function(e){return Mn(e,jn|Cn)};const wn=j;const Rn=e=>t=>(function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(s,l)}c((n=n.apply(e,t||[])).next())})})(void 0,void 0,void 0,function*(){t(function(e){let t=Tn(e),r=0;return t.forEach(e=>{r+=function(e){return null!=e.width?e.width:0}(e),e.showColMenuModal=!1}),{type:g.SET_COL_MODELS,payload:{colModels:t,tableWidth:r},namespace:wn}}(e)),t(function(e){return{type:R.GENERATE_COL_NAME_PROPERTIES_IN_ROW_DATA,payload:{colModels:e},namespace:P}}(e))});function An(e){return{type:g.RESIZE_COLUMN,payload:{e:e},namespace:wn}}function Dn(e=null,t=null){return{type:g.SET_COLUMN_TO_RESIZE,payload:{e:t,column:e},namespace:wn}}function In(){return{type:g.SET_INITIAL_TABLE_OFFSET_WIDTH,namespace:wn,payload:null}}const Nn=()=>({}),Sn=C;var Ln=s((e,t)=>({colModels:e.reactCrudMaster.colModels,data:e.reactCrudMaster.data,tableWidth:e.reactCrudMaster.tableWidth,columnToResize:e.reactCrudMaster.columnToResize,RCMID:e.reactCrudMaster.RCMID,width:e.reactCrudMaster.width}),(e,t)=>({setColModels:t=>e(Rn(t)),resizeColumn:t=>e(An(t)),setColumnToResize:(t=null,r=null)=>e(Dn(t,r)),resetTableoffsetWidth:()=>e(In()),changeOrderDirection:t=>e(function(e){return{type:g.CHANGE_ORDER_DIRECTION,namespace:wn,payload:{column:e}}}(t)),openColMenuModel:t=>e(function(e){return{type:N.OPEN_MODAL,payload:{colModel:e},namespace:Sn}}(t))}))(class extends t{constructor(e){super(e),this.componentDidMount=()=>{},this.onThClick=e=>{this.props.changeOrderDirection(e)},this.state=Nn()}render(){return e.createElement("div",{className:"rcm-header-table-holder",id:"z",onScroll:()=>{var e=document.getElementById("z");document.getElementById("q").scrollLeft=e.scrollLeft}},e.createElement(m,{id:"x",className:"rcm-header-table",striped:!0,bordered:!0,hover:!0,size:"sm",style:{width:this.props.tableWidth}},e.createElement("thead",{className:"rcm-header-table-thead"},e.createElement("tr",null,this.props.colModels.map(t=>e.createElement("th",{className:"rcm-header-table-colum-header",key:t.name,style:{width:t.width},id:t.name},e.createElement("div",{className:"column-header-content-holder"},e.createElement("div",{className:"column-header-label",onClick:()=>this.onThClick(t)},""!=t.orderDirection&&t.orderDirection," ",t.label),e.createElement("div",{className:"column-header-menu-holder"},e.createElement(p,{onClick:()=>this.props.openColMenuModel(t),size:"sm",className:"border-radius-0",style:{marginRight:5,padding:"1px 4px"}},e.createElement("i",{style:{padding:0},className:"fas fa-sliders-h"})))),e.createElement("div",{className:"column-header-resize-bar",onDragStart:e=>e.preventDefault(),onMouseDown:e=>this.setColumnToResize(e,t)}," ")))))))}setColumnToResize(e,t){this.props.setColumnToResize(t,e),document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.userSelect="none"}});const zn=()=>({});var xn=s(e=>({colModels:e.reactCrudMaster.colModels,data:e.reactCrudMaster.data,tableWidth:e.reactCrudMaster.tableWidth,columnToResize:e.reactCrudMaster.columnToResize,RCMID:e.reactCrudMaster.RCMID,width:e.reactCrudMaster.width,selectedRow:e.reactCrudMaster.selectedRow,contextTrigger:e.contextMenuModal.contextMenuTrigger}),e=>({selectRow:t=>e(function(e){return{type:g.SELECT_ROW,namespace:wn,payload:{row:e}}}(t))}))(class extends t{constructor(e){super(e),this.onClickOnRow=e=>{this.props.selectRow(e)},this.onRightClickOnRow=(e,t)=>{e.preventDefault(),this.openContextMenu(e),this.onClickOnRow(t)},this.openContextMenu=e=>{null!=this.props.contextTrigger&&this.props.contextTrigger.handleContextClick(e)},this.testScroll=e=>{document.getElementById("z").scrollLeft=e.target.scrollLeft;var t=document.getElementsByClassName("react-contextmenu--visible");if(t.length>0)for(var r=0;r<t.length;r++)t.item(r).style.opacity="0",t.item(r).style.pointerEvents="none",t.item(r).classList.remove("react-contextmenu--visible")},this.state=zn()}render(){return e.createElement("div",{id:"q",className:"reactable-data-table-holder",style:{overflowX:"auto",overflowY:"auto"},onScroll:e=>this.testScroll(e)},e.createElement(m,{className:"reactable-table reactable-data-table",striped:!0,bordered:!0,hover:!0,size:"sm",style:{width:this.props.tableWidth,borderBottom:0,height:"100%"}},e.createElement("tbody",{className:"reactable-data-body"},this.props.data.map((t,r)=>e.createElement("tr",{key:r,className:t==this.props.selectedRow?"selectedRow":"",onClick:()=>this.onClickOnRow(t),onContextMenu:e=>this.onRightClickOnRow(e,t)},this.props.colModels.map((r,n)=>e.createElement("td",{key:n,style:{width:r.width,wordWrap:"break-word",whiteSpace:"normal",wordBreak:"break-all"}}," ",t[r.name]," ")))))))}});var Wn=s((e,t)=>({show:e.crudModal.show,colModels:e.reactCrudMaster.colModels,rowData:e.crudModal.rowData}),(e,t)=>({closeCrudModal:()=>e({type:R.CLOSE_MODAL,payload:null,namespace:P}),onRowDataChange:(t,r)=>e(function(e,t){return{type:R.ON_ROW_DATA_CHANGE,payload:{name:e,value:t},namespace:P}}(t,r))}))(class extends t{constructor(e){super(e),this.componentDidMount=()=>{},this.handleClose=()=>{this.props.closeCrudModal()},this.onRowDataChange=(e,t)=>{this.props.onRowDataChange(e,t)},this.state=A()}render(){return e.createElement(f,{style:{borderRadius:0},show:this.props.show,onHide:this.handleClose,centered:!0},e.createElement(f.Header,{style:{borderRadius:0},closeButton:!0},e.createElement(f.Title,null,"Modal heading ")),e.createElement(f.Body,null,this.props.colModels.map(t=>e.createElement("div",{key:t.name},e.createElement(h.Group,{controlId:"formBasicEmail",style:{marginBottom:5}},e.createElement(h.Label,{style:{marginBottom:0}},t.name),e.createElement(h.Control,{onChange:e=>this.onRowDataChange(t.name,e.target.value),type:"text",placeholder:t.name,value:this.props.rowData[t.name]}))))),e.createElement(f.Footer,null,e.createElement(p,{variant:"secondary",onClick:this.handleClose},"Close"),e.createElement(p,{variant:"primary",onClick:this.handleClose},"Save Changes")))}});var Pn=s((e,t)=>({colModel:e.colMenuModal.colModel,show:e.colMenuModal.show}),(e,t)=>({closeColMenuModel:()=>e({type:N.CLOSE_MODAL,payload:null,namespace:Sn})}))(class extends t{constructor(e){super(e),this.componentDidMount=()=>{},this.state=S()}render(){return e.createElement(f,{size:"sm",centered:!0,show:this.props.show,onHide:this.props.closeColMenuModel},e.createElement(f.Header,{closeButton:!0},e.createElement(f.Title,{id:"contained-modal-title-vcenter"},this.props.colModel&&this.props.colModel.name)),e.createElement(f.Body,null,e.createElement("div",null,"width: ",this.props.colModel&&this.props.colModel.width),e.createElement("div",null,"freeze"),e.createElement("div",null,"group"),e.createElement("div",null,"advanced column filter")))}});const Bn=w;var kn=s(e=>({RCMID:e.reactCrudMaster.RCMID}),e=>({setContextMenuTriggerRef:t=>e(function(e){return{type:z.SET_CONTEXT_MENU_TRIGGER_REF,payload:{ref:e},namespace:Bn}}(t))}))(class extends t{render(){return e.createElement(e.Fragment,null,e.createElement(y,{id:`context_menu_${this.props.RCMID}`,ref:e=>this.props.setContextMenuTriggerRef(e)},e.createElement("span",null)),e.createElement(E,{id:`context_menu_${this.props.RCMID}`},e.createElement(_,null,e.createElement("i",{className:"fas fa-edit"}),e.createElement("span",{style:{paddingLeft:10}},"Edit")),e.createElement(_,null,e.createElement("i",{className:"fas fa-trash-alt"}),e.createElement("span",{style:{paddingLeft:10}},"Delete")),e.createElement(_,null,e.createElement("i",{className:"fas fa-eye"})," ",e.createElement("span",{style:{paddingLeft:10}},"View"))))}});var Un=s(e=>({columnToResize:e.reactCrudMaster.columnToResize,RCMID:e.reactCrudMaster.RCMID,width:e.reactCrudMaster.width,tableTitleProp:e.reactCrudMaster.tableTitleProp}),e=>({setColModels:t=>e(Rn(t)),setData:t=>e(function(e){let t=Tn(e);return{type:g.SET_DATA,payload:{data:t},namespace:wn}}(t)),resizeColumn:t=>e(An(t)),setColumnToResize:(t=null,r=null)=>e(Dn(t,r)),resetTableoffsetWidth:()=>e(In()),setTableTitle:t=>e(function(e){return{type:g.SET_TABLE_TITLE,namespace:wn,payload:{tableTitle:e}}}(t))}))(class extends t{constructor(e){super(e),this.componentDidMount=()=>{this.props.setColModels(this.props.colModelsProp),this.props.setData(this.props.dataProp),this.props.resetTableoffsetWidth(),null!=this.props.tableTitle&&this.props.setTableTitle(this.props.tableTitle),document.getElementById(`CMID-${this.props.RCMID}`).addEventListener("mouseup",()=>{this.disableResizingColumnIfInResizeMode()}),document.getElementById(`CMID-${this.props.RCMID}`).addEventListener("mousemove",e=>{this.resizeColumnIfInResizeMode(e)})},this.componentWillMount=()=>{window.addEventListener("resize",this.handleWindowSizeChange)},this.componentWillUnmount=()=>{window.removeEventListener("resize",this.handleWindowSizeChange)},this.handleWindowSizeChange=()=>{this.props.resetTableoffsetWidth()},this.disableResizingColumnIfInResizeMode=()=>{null!=this.props.columnToResize&&(this.props.setColumnToResize(),this.enableTextSelectionOnPage())},this.resizeColumnIfInResizeMode=e=>{null!=this.props.columnToResize&&this.props.resizeColumn(e)},this.enableTextSelectionOnPage=()=>{document.body.style.webkitUserSelect="",document.body.style.msUserSelect="",document.body.style.userSelect=""},this.state=O()}render(){return e.createElement(e.Fragment,null,e.createElement(b,{id:`CMID-${this.props.RCMID}`,style:{minWidth:360,borderRadius:0}},e.createElement(b.Header,{className:"cm-table-header","data-testid":"cm-table-header",style:{padding:5},as:"h5"},this.props.tableTitleProp),e.createElement(b.Body,{style:{padding:0}},e.createElement("div",{id:`reactable-card-body-${this.props.RCMID}`,className:"reactable-table-holder"},e.createElement(Ln,null),e.createElement(xn,null)),e.createElement("div",{style:{paddingRight:20,paddingLeft:20,paddingTop:10,paddingBottom:10}},e.createElement(B,{tableWidth:this.props.width})))),e.createElement(Wn,null),e.createElement(Pn,null),e.createElement(kn,null))}});export default class extends t{constructor(e){super(e),this.store=n(W,a(v))}render(){return e.createElement(l,{store:this.store},e.createElement(Un,{dataProp:this.props.data,colModelsProp:this.props.colModels}))}}export{I as ColModel};
